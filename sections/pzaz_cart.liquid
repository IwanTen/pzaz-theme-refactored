{{ "cart.css" | asset_url | stylesheet_tag }}

{% assign addons = section.settings.collection.products %}

<pzaz-cart>
  <div class="cart">

    <div class="cart__main">
      <div class="cart__header">
        <span class="cart__close">{% render "icon-plus" %}</span>
      </div>
      {% comment %} <div
      class="filler"></div> {% endcomment %}
      {% comment %} <div class="cart cart-hidden">
      Your cart is empty.
      <p>test ets  test
      </p>
      {% render "zazzy-cta-button" %}
      </div> {% endcomment %}
      <h3 class="cart__title cart__title--line">
        your flavors</h3>
      <div class="cart__line" data-ajax-cart-section>
        <div class="cart__line-items">
          {% for item in cart.items %}
            <div class="cart__line-item">

              <h3 class="cart__line-item--info">
                <span>{{ item.quantity }}x</span>
                <span>{{ item.title }}</span><br>
              </h3>
            </div>
          {% endfor %}
        </div>
        <div class="cart__line-info">
          <div>
            <span class="cart__line-info--original-price">
              {{ cart.total_discount | money }}</span>
            <span class="cart__line-info--total-price">
              {{ cart.total_price | money }}</span>
          </div>


          <a
            class="cart__line-info--button"
            data-ajax-cart-static-element
            data-action="clear">EDIT</a>
        </div>
      </div>
      <div class="cart__highlights">
        <p class="cart-highlight text-left">40¢ per serving</p>
        <p class="cart-highlight text-right">70+ 5 Star Reviews</p>
        <p class="cart-highlight text-left">30% Off – You’ve Saved $31</p>
        <p class="cart-highlight text-right">Free Shipping</p>
      </div>

      <h3 class="cart__title cart__title--accessories">Accessorize?</h3>
      <div class="cart__addons">
        {% for addon in addons %}
          <div class="cart-addon">
            <img
              class="cart-addon__image"
              src="{{ addon.featured_image | img_url: 'medium' }}"
              alt="{{ addon.title }}"
              width="100"
              height="70"
              loading="lazy">
            <div class="cart-addon__content">
              <h3 class="cart-addon__name">{{ addon.title }}</h3>
              <span class="cart-addon__price">{{ addon.price | money }}</span>
            </div>

            {% assign selected = false %}
            {% for item in cart.items %}
              {% if item.id == addon.selected_or_first_available_variant.id %}
                {% assign selected = true %}
              {% endif %}
            {% endfor %}
            <a
              data-ajax-cart-section
              {% assign selected = false %}
              {% for item in cart.items %}
              {% if item.id == addon.selected_or_first_available_variant.id %}{% assign selected = true %}{% endif %}{% endfor %}href="
                                                                                              {% if selected %}
                                                                                                {{ routes.cart_change_url }}?id={{ addon.selected_or_first_available_variant.id }}&quantity=0
                                                                                              {% else %}
                                                                                                {{ routes.cart_add_url }}?id={{ addon.selected_or_first_available_variant.id }}&quantity=1
                                                                                              {% endif %}"data-ajax-cart-request-button>
              {% render "spinner" %}
              <label class="cart-addon__button {% if selected %} active {% endif %}">
                <input class="cart-addon__input" type="checkbox" />
                {% for item in cart.items %}{% endfor %}
                <p class="cart-addon__button-text">
                  {% if selected == true %}
                    remove
                  {% else %}
                    add

                  {% endif %}
                </p>

              </label>
            </a>
          </div>
        {% endfor %}
      </div>

      <div class="cart__subscription">
        <div class="cart-subscribe__toggle">subscribe</div>
        <div class="cart-subscribe__info">
          <h3 class="cart-subscribe__title">Subscribe + Save</h3>
          <p class="cart-subscribe__description">Get 10% off your first order and 10% off every order after that. Cancel anytime.</p>
        </div>
      </div>

    </div>


    <div class=cart__footer>

      <div class="cart__summary">
        <h1 class="cart__title cart-title--summary">Summary</h1>
        <div class="cart-summary__item" data-type="total">
          <h3 class="cart-summary__key">Product total</h3>
          <span class="cart-summary__value">{{ cart.original_total_price | money }}</span>
        </div>
        <div class="cart-summary__item" data-type="savings">
          <h3 class="cart-summary__key">Total savings</h3>
          <span class="cart-summary__value">{{ cart.total_discount | money }}</span>
        </div>
        <div class="cart-summary__item" data-type="shipping">
          <h3 class="cart-summary__key">Shipping</h3>
          <span class="cart-summary__value">Free Shipping</span>
        </div>
      </div>

      <div class="cart__total">
        <h3 class="cart-total__key">Cart Total</h3>
        <span class="cart-total__value">{{ cart.total_price | money }}</span>
      </div>


    </div>
  </div>


  <script type="application/json">
    {{ cart | json }}
  </script>
</pzaz-cart>



<script src="{{ 'cart.js' | asset_url }}" defer="defer"></script>

{% schema %}
  {
    "name": "cart-section",
    "tag": "section",
    "class": "section",
    "settings": [
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      }
    ]
  }
{% endschema %}