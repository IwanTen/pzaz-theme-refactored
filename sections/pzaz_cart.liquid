{{ "cart.css" | asset_url | stylesheet_tag }}

{% assign addons = section.settings.collection.products %}

<pzaz-cart>


  <div class="cart" data-cart-view="data-cart-view">
    <div class="cart__header">
      <span class="cart__close">X</span>
    </div>
    <div class="cart cart-hidden" rv-show="cart.item_count | eq 0">
      Your cart is empty.
      <p>test ets  test
      </p>
      {% render "zazzy-cta-button" %}
    </div>
    <div rv-show="cart.item_count | gt 0">
      <span class="discount-message">
        <p class="discount-message__text">
          One tube, sixty sprays, $3.99.
          Select a four-pack of your favorite flavor:
        </p>
      </span>
      <h3 class="cart__title cart__title--line">your flavors</h3>
      <div class="cart__line">
        <div class="cart__line-items">
          <div class="cart__line-item" rv-each-item="cart.items">
            <h3 class="cart__line-item--info">
              <span rv-text="item.quantity | append 'x ' "></span>
              <span rv-text="item.title"></span><br>
            </h3>
          </div>
        </div>
        <div class="cart__line-info">
          <div>
            <span class="cart__line-info--original-price" rv-text="cart.original_total_price | money Currency.currentCurrency">
              {{ cart.total_discount | money }}</span>
            <span class="cart__line-info--total-price" rv-text="cart.total_price | money Currency.currentCurrency">
              {{ cart.total_price | money }}</span>
          </div>


          <a class="cart__line-info--button" data-cart-clear>CLEAR</a>
        </div>
      </div>
      <div class="cart__highlights">
        <p class="cart-highlight text-left">40¢ per serving</p>
        <p class="cart-highlight text-right">70+ 5 Star Reviews</p>
        <p class="cart-highlight text-left">30% Off – You’ve Saved $31</p>
        <p class="cart-highlight text-right">Free Shipping</p>
      </div>

      <h3 class="cart__title cart__title--accessories">Accessorize?</h3>
      <div class="cart__addons">
        {% for addon in addons %}
          <div class="cart-addon">
            <img
              class="cart-addon__image"
              src="{{ addon.featured_image | img_url: 'medium' }}"
              alt="{{ addon.title }}"
              width="100"
              height="70"
              loading="lazy">
            <div class="cart-addon__content">
              <h3 class="cart-addon__name">{{ addon.title }}</h3>
              <span class="cart-addon__price">{{ addon.price | money }}</span>
            </div>
            <label class="cart-addon__button">
              <input
                class="cart-addon__input"
                type="checkbox"
                data-cart-toggle="{{ addon.first_available_variant.id }}" />
              {% for item in cart.items %}
                {% if item.variant_id == addon.first_available_variant.id %}
                  {% assign checked = true %}
                {% endif %}
              {% else %}
                {% assign checked = false %}
              {% endfor %}
              <p class="cart-addon__button-text">
                {% if checked %}
                  remove
                {% else %}
                  add
                {% endif %}
              </p>
            </label>
          </div>
        {% endfor %}
      </div>

      <div class="cart__subscription">
        <div class="cart-subscribe__toggle">subscribe</div>
        <div class="cart-subscribe__info">
          <h3 class="cart-subscribe__title">Subscribe + Save</h3>
          <p class="cart-subscribe__description">Get 10% off your first order and 10% off every order after that. Cancel anytime.</p>
        </div>
      </div>

      <div class="cart__summary">
        <h1 class="cart__title cart-title--summary">Summary</h1>
        <div class="cart-summary__item" data-type="total">
          <h3 class="cart-summary__key">Product total</h3>
          <span class="cart-summary__value" rv-text="cart.original_total_price | money Currency.currentCurrency">{{ cart.original_total_price | money }}</span>
        </div>
        <div class="cart-summary__item" data-type="savings">
          <h3 class="cart-summary__key">Total savings</h3>
          <span class="cart-summary__value" rv-text="cart.total_discount | money Currency.currentCurrency | prepend '-'">{{ cart.total_discount | money }}</span>
        </div>
        <div class="cart-summary__item" data-type="shipping">
          <h3 class="cart-summary__key">Shipping</h3>
          <span class="cart-summary__value">Free Shipping</span>
        </div>
      </div>

      <div class="cart__total">
        <h3 class="cart-total__key">Cart Total</h3>
        <span class="cart-total__value" rv-html="cart.total_price | money Currency.currentCurrency"></span>
      </div>


    </div>
  </div>

  <script type="application/json">
    {{ cart | json }}
  </script>
</pzaz-cart>

<a class="cart-toggle" data-cart-view="data-cart-view">
  {% render "icon-cart" %}
  <span class="cart-toggle__quantity" rv-text="cart.item_count">{{ cart.item_count }}</span>
</a>



<script src="{{ 'cart.js' | asset_url }}" defer="defer"></script>

{% schema %}
  {
    "name": "cart-section",
    "tag": "section",
    "class": "section",
    "settings": [
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      }
    ]
  }
{% endschema %}